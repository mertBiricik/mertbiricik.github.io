<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Building a Production RAG System: Turkish Basketball Federation AI Assistant - Mert Biricik | Full Stack Developer & Data Scientist</title>
  <meta name="description" content="Mert Biricik - Full Stack Developer, Data Scientist, and ML Engineer with expertise in web applications and machine learning solutions.">
  
  <!-- Google Site Verification -->
  <meta name="google-site-verification" content="0b64d5c9758fafd9">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mert.biricik.de/">
  <meta property="og:title" content="Building a Production RAG System: Turkish Basketball Federation AI Assistant - Mert Biricik">
  <meta property="og:description" content="Full Stack Developer & Data Scientist">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="Building a Production RAG System: Turkish Basketball Federation AI Assistant - Mert Biricik">
  <meta property="twitter:description" content="Full Stack Developer & Data Scientist">
  
  <!-- Favicons and Icons -->
  <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/icon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/icon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/svg+xml" href="/assets/icons/icon.svg">
  
  <!-- Android/Chrome -->
  <link rel="manifest" href="/assets/icons/site.webmanifest">
  <meta name="theme-color" content="#2b2b2b">
  <link rel="alternate" href="/rss.xml" type="application/atom+xml" title="Mert Biricik's Blog Feed">
  
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="header">
    <nav class="nav">
      <div class="nav-container">
        <a href="/" class="nav-logo">Mert Biricik</a>
        <ul class="nav-menu">
          
          <li class="nav-item">
            <a href="/" class="nav-link">Home</a>
          </li>
          
          <li class="nav-item">
            <a href="/about/" class="nav-link">About</a>
          </li>
          
          <li class="nav-item">
            <a href="/projects/" class="nav-link">Portfolio</a>
          </li>
          
          <li class="nav-item">
            <a href="/blog/" class="nav-link">Blog</a>
          </li>
          
          <li class="nav-item">
            <a href="/demos/enerdata-primary-energy/" class="nav-link">Demo</a>
          </li>
          
          <li class="nav-item">
            <a href="/publications/" class="nav-link">Publications</a>
          </li>
          
          <li class="nav-item">
            <a href="/contact/" class="nav-link">Contact</a>
          </li>
          
        </ul>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
          <i class="fas fa-sun sun-icon"></i>
          <i class="fas fa-moon moon-icon"></i>
        </button>
        <div class="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>
  </header>

  <main class="main">
    
<section class="section">
  <div class="section-container">
    <article class="blog-post">
      <h1 class="blog-post-title">Building a Production RAG System: Turkish Basketball Federation AI Assistant</h1>
      <div class="blog-post-meta">
        <span class="post-date"><i class="far fa-calendar-alt"></i> August 11, 2025</span>
        
        
        <div class="post-tags">
          
          <span class="tag">ai</span>
          
          <span class="tag">rag</span>
          
          <span class="tag">mcp</span>
          
          <span class="tag">python</span>
          
          <span class="tag">tutorial</span>
          
        </div>
        
      </div>
      <div class="blog-post-content">
        <h2>Building a Production RAG System: Turkish Basketball Federation AI Assistant</h2>
<p>Complete tutorial for deploying a multilingual Retrieval-Augmented Generation system combining basketball rules with live statistics on any Linux system.</p>
<hr>
<h3>System Overview</h3>
<p>Production-ready Basketball RAG system with dual-component architecture:</p>
<ul>
<li><strong>Rules Component:</strong> ChromaDB vector database (873 documents)</li>
<li><strong>Statistics Component:</strong> FastAPI server (17,261+ games)</li>
<li><strong>Smart Router:</strong> Query classification and routing</li>
<li><strong>Web Interface:</strong> Gradio production frontend</li>
</ul>
<p><strong>Key Features:</strong></p>
<ul>
<li>Bilingual Turkish/English support</li>
<li>GPU-accelerated embeddings (BGE-M3)</li>
<li>Llama 3.1 8B integration via Ollama</li>
<li>External access via localtunnel</li>
<li>Production error handling and logging</li>
</ul>
<hr>
<h3>Prerequisites</h3>
<p><strong>System Requirements:</strong></p>
<pre><code class="language-bash"># Ubuntu/Debian systems
sudo apt update
sudo apt install python3.8+ python3-pip git curl build-essential

# GPU acceleration (recommended)
# CUDA-capable GPU with 8GB+ VRAM
# RTX 3060/4060 or better
</code></pre>
<p><strong>Core Dependencies:</strong></p>
<pre><code class="language-bash">pip install torch transformers sentence-transformers
pip install chromadb fastapi uvicorn gradio
pip install pandas numpy requests pyyaml tqdm
pip install langchain-community ollama python-docx
</code></pre>
<p><strong>Ollama Setup:</strong></p>
<pre><code class="language-bash"># Install Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# Pull required model
ollama pull llama3.1:8b-instruct-q4_K_M
</code></pre>
<hr>
<h3>Project Structure</h3>
<pre><code>tbf_mhk_rag_mcp/
├── data/                    # CSV game statistics (76 files)
├── documents/              # PDF basketball rules
├── scripts/
│   ├── setup_database.py   # Vector DB initialization  
│   ├── build_stats_db.py   # Statistics DB builder
│   └── gradio_app.py       # Development interface
├── servers/
│   └── stats_api.py        # FastAPI statistics server
├── src/
│   └── utils/
│       ├── config.py       # Hardware detection
│       └── query_router.py # Query classification
├── production_app.py       # Production system
└── Basketball_RAG_Setup_Instructions.md
</code></pre>
<hr>
<h3>Step 1: Database Initialization</h3>
<p><strong>Vector Database (Rules):</strong></p>
<pre><code class="language-bash"># Create vector database from PDF documents
python scripts/setup_database.py

# Verify database
# Should output: &quot;✅ Connected to vector database: 873 documents&quot;
</code></pre>
<p><strong>Statistics Database (Games):</strong></p>
<pre><code class="language-bash"># Build SQLite database from CSV files
python scripts/build_stats_db.py

# Output: &quot;✅ Database built: 17,261 games processed&quot;
</code></pre>
<hr>
<h3>Step 2: Query Router Implementation</h3>
<p><strong>Core Router Logic:</strong></p>
<pre><code class="language-python">class QueryRouter:
    def __init__(self, stats_api_url=&quot;http://localhost:8001&quot;):
        self.stats_keywords = {
            # Turkish: maç, takım, sezon, sonuç, istatistik
            # English: game, team, season, result, statistics
        }
        
        self.team_patterns = [
            r'\b(tofaş|fenerbahçe|galatasaray)\b',
            r'\b(efes|beşiktaş|trabzonspor)\b'
        ]
    
    def classify_query(self, query: str) -&gt; str:
        # Smart classification logic
        # Returns 'stats' or 'rules'
        
    def query_stats_api(self, query: str) -&gt; dict:
        # Extract parameters and query API
        # Turkish character encoding handled
</code></pre>
<p><strong>Turkish Character Encoding:</strong></p>
<pre><code class="language-python"># Critical for Turkish team names
params = {'team_name': 'TOFAŞ'}
url = f&quot;{api_url}?{urlencode(params, safe='', encoding='utf-8')}&quot;
</code></pre>
<hr>
<h3>Step 3: Production System Setup</h3>
<p><strong>Launch Production System:</strong></p>
<pre><code class="language-bash"># Single command deployment
python production_app.py

# System startup sequence:
# 🚀 Initializing Production Basketball RAG System...
# 📊 Loading BAAI/bge-m3 on cuda...
# ✅ Vector database: 873 documents
# ✅ Stats API started successfully
# 🎉 Production system ready!
# 🌐 Access at: http://localhost:7860
</code></pre>
<p><strong>Key Production Features:</strong></p>
<ul>
<li>Automatic service startup</li>
<li>Port detection and binding</li>
<li>Error recovery and fallbacks</li>
<li>Comprehensive logging</li>
<li>GPU optimization with CPU fallback</li>
</ul>
<hr>
<h3>Step 4: External Access Configuration</h3>
<p><strong>Localtunnel Setup:</strong></p>
<pre><code class="language-bash"># Install localtunnel globally
npm install -g localtunnel

# Create tunnel to production system
lt --port 7860

# Example output:
# your url is: https://all-spies-hunt.loca.lt
# Password: 31.223.4.21 (your public IP)
</code></pre>
<p><strong>Alternative Tunneling:</strong></p>
<pre><code class="language-bash"># Using ngrok
ngrok http 7860

# Using serveo
ssh -R 80:localhost:7860 serveo.net
</code></pre>
<hr>
<h3>Step 5: Query Examples and Testing</h3>
<p><strong>Rules Queries (Turkish):</strong></p>
<pre><code>&quot;5 faul yapan oyuncuya ne olur?&quot;
&quot;Basketbol sahasının boyutları nelerdir?&quot;
&quot;Şut saati kuralı nasıl işler?&quot;
&quot;2024 yılında hangi kurallar değişti?&quot;
</code></pre>
<p><strong>Rules Queries (English):</strong></p>
<pre><code>&quot;What happens when a player gets 5 fouls?&quot;
&quot;What are basketball court dimensions?&quot;
&quot;How does the shot clock rule work?&quot;
&quot;Which rules changed in 2024?&quot;
</code></pre>
<p><strong>Statistics Queries (Turkish):</strong></p>
<pre><code>&quot;TOFAŞ maçları 2023-2024 sezonunda&quot;
&quot;Fenerbahçe vs Galatasaray maçları&quot;
&quot;BSL 2024-2025 sezon sonuçları&quot;
&quot;Kadın basketbol lig sonuçları&quot;
</code></pre>
<p><strong>Statistics Queries (English):</strong></p>
<pre><code>&quot;TOFAŞ games in 2023-2024 season&quot;
&quot;Show me games from BSL league&quot;
&quot;Basketball league standings&quot;
&quot;Women's basketball results&quot;
</code></pre>
<hr>
<h3>Step 6: API Integration and Testing</h3>
<p><strong>Direct Statistics API Testing:</strong></p>
<pre><code class="language-bash"># Test API endpoints directly
curl &quot;http://localhost:8001/games/?team_name=TOFAŞ&amp;limit=5&quot;

# Expected response:
# [{&quot;tarih&quot;: &quot;12.05.2024&quot;, &quot;team_a&quot;: &quot;TOFAŞ&quot;, &quot;team_b&quot;: &quot;GALATASARAY&quot;, ...}]
</code></pre>
<p><strong>API Parameters:</strong></p>
<ul>
<li><code>team_name</code>: Turkish team name (TOFAŞ, FENERBAHÇE, GALATASARAY)</li>
<li><code>season</code>: Format &quot;2023-2024&quot;</li>
<li><code>date</code>: Format &quot;DD.MM.YYYY&quot;</li>
<li><code>limit</code>: Maximum results (default 50)</li>
</ul>
<hr>
<h3>Step 7: MCP Server Integration (Optional)</h3>
<p><strong>Model Context Protocol Setup:</strong></p>
<pre><code class="language-python"># Configure MCP for Claude integration
# Enables direct API access from Claude Code

class MCPServer:
    def handle_basketball_query(self, query: str):
        # Route query through production system
        return self.rag_system.process_query(query)
</code></pre>
<p><strong>MCP Configuration:</strong></p>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;basketball-rag&quot;: {
      &quot;command&quot;: &quot;python&quot;,
      &quot;args&quot;: [&quot;mcp_server.py&quot;],
      &quot;env&quot;: {
        &quot;STATS_API_URL&quot;: &quot;http://localhost:8001&quot;
      }
    }
  }
}
</code></pre>
<hr>
<h3>Step 8: Performance Optimization</h3>
<p><strong>Hardware Detection:</strong></p>
<pre><code class="language-python">def detect_hardware():
    if torch.cuda.is_available():
        gpu_name = torch.cuda.get_device_name(0)
        vram_gb = torch.cuda.get_device_properties(0).total_memory / 1e9
        # Optimize model selection based on VRAM
        return select_optimal_models(vram_gb)
    return default_models()
</code></pre>
<p><strong>Model Selection Logic:</strong></p>
<ul>
<li><strong>8GB+ VRAM:</strong> BGE-M3 embeddings + Llama 3.1 8B</li>
<li><strong>4-8GB VRAM:</strong> BGE-M3 embeddings + Llama 3.1 8B Q4</li>
<li><strong>&lt;4GB VRAM:</strong> MiniLM embeddings + Llama 3.1 8B Q2</li>
</ul>
<hr>
<h3>Step 9: Troubleshooting Common Issues</h3>
<p><strong>Vector Database Empty:</strong></p>
<pre><code class="language-bash"># Check database status
python -c &quot;import chromadb; print(chromadb.PersistentClient('./vector_db/chroma_db').get_collection('basketball_rules').count())&quot;

# If 0 documents, rebuild:
python scripts/setup_database.py
</code></pre>
<p><strong>Turkish Character Issues:</strong></p>
<pre><code class="language-python"># Ensure proper encoding in all API calls
import urllib.parse
team_name = &quot;TOFAŞ&quot;
encoded = urllib.parse.quote(team_name, encoding='utf-8')
</code></pre>
<p><strong>GPU Memory Issues:</strong></p>
<pre><code class="language-bash"># Monitor GPU usage
nvidia-smi -l 1

# Clear GPU cache in Python
torch.cuda.empty_cache()
</code></pre>
<p><strong>Port Conflicts:</strong></p>
<pre><code class="language-bash"># Find and kill processes using required ports
lsof -ti:8001 | xargs kill -9
lsof -ti:7860 | xargs kill -9
</code></pre>
<hr>
<h3>Step 10: Production Deployment Checklist</h3>
<p><strong>Pre-deployment:</strong></p>
<ul>
<li>[ ] Vector database populated (873 documents)</li>
<li>[ ] Statistics database built (17,261+ games)</li>
<li>[ ] Ollama running with Llama 3.1 8B model</li>
<li>[ ] All dependencies installed</li>
<li>[ ] GPU drivers configured (if applicable)</li>
</ul>
<p><strong>Deployment:</strong></p>
<ul>
<li>[ ] Production system launches successfully</li>
<li>[ ] Both rules and stats queries working</li>
<li>[ ] External tunnel configured</li>
<li>[ ] Error logging active</li>
<li>[ ] Performance monitoring enabled</li>
</ul>
<p><strong>Post-deployment:</strong></p>
<ul>
<li>[ ] Test all query types</li>
<li>[ ] Verify Turkish character handling</li>
<li>[ ] Check response times (&lt;3s typical)</li>
<li>[ ] Monitor system resources</li>
<li>[ ] Document access credentials</li>
</ul>
<hr>
<h3>System Architecture Benefits</h3>
<p><strong>Scalability:</strong></p>
<ul>
<li>Microservice architecture (RAG + Stats API)</li>
<li>Horizontal scaling via load balancing</li>
<li>Database sharding for large datasets</li>
</ul>
<p><strong>Reliability:</strong></p>
<ul>
<li>Automatic failover between components</li>
<li>Graceful degradation when services unavailable</li>
<li>Comprehensive error handling and logging</li>
</ul>
<p><strong>Multilingual Support:</strong></p>
<ul>
<li>Language detection and routing</li>
<li>Turkish/English response formatting</li>
<li>Character encoding optimization</li>
</ul>
<hr>
<h3>Next Steps</h3>
<p><strong>System Enhancements:</strong></p>
<ul>
<li>Add more sports leagues and data sources</li>
<li>Implement user authentication and sessions</li>
<li>Create mobile application interface</li>
<li>Add real-time statistics streaming</li>
</ul>
<p><strong>Technical Improvements:</strong></p>
<ul>
<li>Fine-tune embedding models for domain-specific queries</li>
<li>Implement advanced caching strategies</li>
<li>Add A/B testing for query routing algorithms</li>
<li>Integrate with official federation APIs</li>
</ul>
<p><strong>Production Monitoring:</strong></p>
<ul>
<li>Set up Prometheus/Grafana dashboards</li>
<li>Implement alerting for system failures</li>
<li>Add performance analytics and user tracking</li>
<li>Create automated backup procedures</li>
</ul>
<hr>
<p>Complete production system providing intelligent basketball assistance through advanced AI integration. Deployable on any Linux system with comprehensive documentation and error handling.</p>

      </div>
    </article>
  </div>
</section>

  </main>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Mert Biricik</h3>
          <p>Full Stack Developer & Data Scientist</p>
        </div>
        <div class="footer-section">
          <h4>Connect</h4>
          <div class="social-links">
            <a href="https://linkedin.com/in/mertbiricik" target="_blank" rel="noopener noreferrer">
              <i class="fab fa-linkedin"></i> LinkedIn
            </a>
            <a href="https://github.com/mertbiricik" target="_blank" rel="noopener noreferrer">
              <i class="fab fa-github"></i> GitHub
            </a>
            <a href="mailto:mert@biricik.de">
              <i class="fas fa-envelope"></i> Email
            </a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Mert Biricik. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="/js/main.js"></script>
</body>
</html>